<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans:400,500,500i,700,700i|Fira+Sans:200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800|Forum|Open+Sans:400,400i,600,600i,700|PT+Sans:400,400i,700|Roboto:400,500,500i,700|Source+Sans+Pro:400,400i,600,600i,700,700i,900&amp;subset=cyrillic-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Alegreya|Alice|Cormorant|Jura|Montserrat+Alternates|Philosopher" rel="stylesheet">
    <link rel="stylesheet" href="css/application.css">
</head>

<style>


</style>
<body>

<div id="myModal">
    <div id="modal-first-row">
    <div id="neon">
        <p id="black"><span>чо</span><span>р</span><span>н</span><span>а</span></p>
        <p id="friday"><span>п'</span><span>я</span><span>т</span><span>н</span><span>и</span><span>ц</span><span>я</span></p>
    </div>
        </div>

    <div id="warning">
        <h2 style="color:#b0b0b0;">Щоб подивитись проект, переверніть екран в широку орієнтацію. Дякуємо!</h2>

    </div>
</div>

<div id="header">
  <div id="neon-container">
    <div id="neon">
        <p id="black"><span>чо</span><span>р</span><span>н</span><span>а</span></p>
        <p id="friday"><span>п'</span><span>я</span><span>т</span><span>н</span><span>и</span><span>ц</span><span>я</span></p>
    </div>
  </div>
</div>


<div id="main-content">
    <div class="text">
        <h2>На чорну п’ятницю варто купувати смартфон і не варто ‒ сукню.</h2>

        <p>Можливо, ви також встигли прикупити щось довгоочікуване і бажане, або дозволили собі незаплановані покупки ‒ коли, як не зараз?! Але чи дійсно Чорна пʼятниця є проявом небаченої щедрості з боку продавців, і чи справді в цей день вони заробляють на великому обороті, а не на високій ціні? Залежить від того, що ви купуєте. </p>

        <p> З травня по листопад кілька разів на місяць ми збирали ціни на низку товарів у кількох популярних інтернет-магазинах. До нашої вибірки потрапили смартфони, ноутбуки, телевізори, велика побутова техніка, дрібна побутова техніка, одяг, верхній одяг, сумки, парфуми. Загалом ми зібрали інформацію про майже 70 тисяч товарів. Потім серед них ми вибрали ті, які продавалися зі знижками на чорну п’ятницю та порівняли цю “чорну” ціну з вартістю за півроку. В результаті ми отримали дані щодо 7.3 тис. товарів, з яких 1025 одиниць техніки з двох добре відомих інтернет-магазинів, і майже 6.3 тис. одиниць жіночого одягу і сумок з популярного магазину одягу. Ми не стверджуємо, що схожа ситуація ‒ й у інших продавців. Але звертаємо увагу на те, як можуть діяти продавці, в тому числі і з відомими брендами.
        </p>


        <h2> 486 чесних знижки</h2>
        <p>Порівнявши ціни товарів Чорної пʼятниці з цінами на ці ж товари, за якими вони продавались протягом травня-листопада, ми зʼясували, що не варто вірити магазинам на слово про розмір акційних знижок. Лише у 486 випадках заявлена магазином знижка відповідала реальній, або була близькою до неї (різниця у 2%). Реальну знижку ми рахували як різницю у відсотках між ціною Чорної пʼятниці і середньою ціною на товар протягом травня-листопада. Але ж хіба в покупця є час думати про це, коли "акційний товар закінчується дуже швидко" і "до кінця акції залишилось три, два, один день". Графік нижче показує <b>співвідношення реальних знижок з тими, які пропонували магазини</b>. </p>
    </div>
</div>


<div style="" id="bigContainer">

    <div style="" id="turnMe">
        <svg  id="scatter"  viewBox="0 0 900 900"></svg>
    </div>
    <div id="scatter-legend"  style="">
        <p ><span style="font-weight:400;">Кольорами позначені категорії товарів:</span><br>
        <span class="rectangle" style="background-color:#88d78e;"></span><span> Техніка</span> <br>
        <span class="rectangle" style="background-color:#FF80B3;"></span><span> Одяг, сумки</span> <br>
        </p>

        <p id="mobHide" style="margin-top:20px;">Точки на графіку клікабельні. По кліку відриється графік, на якому відображено динаміку ціни на товар протягом півроку і в день Чорної Пʼятниці.</p>
    </div>
</div>


<div class="text">
    <p> Для того, аби обдурити покупця або, навпаки, продати йому товар зі знижкою, продавцям не треба чекати спеціальної пʼятниці. Вони роблять і те, й інше регулярно. Тож Чорна пʼятниця дає покупцям відразу три можливості:
    <ul>
        <li>Дійсно купити товар зі знижкою (памʼятаємо про понад 486 товарів із 7280, в яких заявлена знижка збігалася з реальною)</li>
        <li>Купити товар за мінімальною ціною. Часто ціна товару в чорну пʼятницю близька до його найнижчої ціни за півроку або дорівнює середній. У 1653 випадках знижка становила аж… нуль відсотків від середньої ціни за півроку. </li>
        <li>Переплатити зайві 1-100% (як пощастить) за красиву сукню, модну шубу, сумку на тлі загальної істерії. 991 товар з 7280 в Чорну пʼятницю продавався дорожче.</li>
    </ul>

    <p>На графіках нижче представлена середня ціна за категоріями. За 100% взята ціна, за якою товар пропонували купити у Black friday. Від неї ми рахували зміни у відсотках на поточну й стару ціну на кожен товар.</p>

    <p> <b>Стара ціна</b> на графіках позначена <b>чорною</b> лінією, <span style="color:#ff36ad">поточна ‒ рожевою</span>. Якщо стара ціна на товар зазначена чесно, то чорна й рожева лінії мають перетинатись.</p>

    <p>В цілому, black friday-знижки можна умовно поділити на три типи, які є цілком закономірними.</p>
</div>

<div id="sale">
    <div id="smallMultiplesContainer1"></div>
    <div id="scrollText1" class="scroll-block2">
        <p>На ноутбуки, телефони, планшети, смарт-годинники стара ціна зазвичай є справжньою старою ціною. Ви бачите, як чорна лінія перетинається з рожевою. Однак враховуйте, що подібна техніка постійно дешевшає через появу нових, вдосконалених моделей. Магазинам невигідно, щоб такі товари залежувались на складах, бо щодня їхня реальна ціна зменшується. Середня знижка на смартфони на чорнопʼятничних розпродажах склала 15.1%, смарт-годинники ‒ 19%, навушники ‒ 23%. Ноутбуки в середньому продавались на 13.5% дешевше. Але на дорогих моделях можна було заощадити до понад 10 тис. грн (наприклад, Ноутбук Lenovo Yoga 910-13IKB (80VF00DGRA) Silver один із магазинів віддавав за 38 тис. грн, в той час як середня ціна на нього протягом року складала 50.5 тис. грн. </p>
    </div>
    <div id="smallMultiplesContainer2"></div>
    <div id="scrollText2" class="scroll-block2">
        <p>Друга категорія ‒ це телевізори та побутова техніка. Життя таких товарів трохи триваліше, ніж смартфонів або смарт-годинників, і цінова політика повністю цьому відповідає. Лінія старої ціни завжди дещо вища за поточну, аби створити у покупця враження, що він трохи економить, придбавши товар саме зараз.  Водночас, на моделях телевізорів вартістю понад 50 тис. грн на Чорну пʼятницю були помітні знижки. Наприклад, <b>Телевізор LG OLED55B8PLA</b>, середня ціна якого за півроку склала понад 67199 грн, в день знижок продавали за 41999 грн. Дрібна побутова техніка більше втратила в ціні, ніж велика. Тостери, блендери та соковичавниці продавались в середньому на 18-19% дешевше. </p>

    </div>
    <div id="smallMultiplesContainer3"></div>
    <div id="scrollText3" class="scroll-block2">
        <p>Одяг модних брендів не є товаром першої необхідності. Cукні не загрожує новіша модель, і зазвичай сукня не коштує, як телевізор чи холодильник. На це й розраховують продавці. Тож вказана стара ціна ‒ майже завжди приманка. Єдина її функція ‒ створити у покупця хибне враження, що, не придбавши товар прямо зараз, він ризикує сильно переплатити потім. Водночас зазначимо, що одяг ‒ єдина категорія, де знижки сягали понад 50%. Більше ніж 200 суконь продавались з такою знижкою (у порівнянні до середньої ціни на них за півроку), а середня знижка на цей товар становила 21.4%. А це ‒ набагато більше, ніж у магазинах техніки. Але проблема в тому, що даючи непогані реальні знижки, магазин намагався створити враження шаленого розпродажу зі знижками до -90%. Тому так багато товарів з категорії одягу потрапили в зону НЕЧЕСНИХ ЗНИЖОК. До того ж, зі знижками частіше продають дешевші речі. А от знижки на верхній одяг не були настільки привабливими ‒ лише 7.5%. Зате він є лідером за націнками ‒ 13.7%.</p>

    </div>
</div>

<!-- не чіпати! Привід для розрахунку ширини контейнеру для svh small-multiples;-->
<div id="categories">
    <div id="phantomContainer">
        <div id="phantom"></div>
    </div>
    <div id="afterPhantom"></div>
</div>


<div id="examples" class="text-80">
    <div id="scroll-chart"></div>

    <div id="scroll-text">
    <h2>Холодильник та інші приклади</h2>

        <div id = "c-1341606" class="block">
            <p>Холодильник Gorenje NRS9181CBBK двічі за рік втрачав у ціні понад 100 тис. грн. Ми не знаємо, з чим пов’язані такі суттєві стрибки ціни. Але, незважаючи на справді відчутну різницю між середньою ціною за півроку і ціною у Black Friday, навряд чи цей випадок можна віднести до акційних знижок.</p>
        </div>
        <div id="c-1023088" class="block">
            <p>А от інший холодильник ‒ Hitachi R-V720PUC1KXINX ‒ напередодні розпродажу, навпаки, додав у ціні. Ціна Чорної пʼятниці відносно середньої склала +23%. На початку травня він коштував 19778 грн, а потім поступово зростав в ціні аж до 31599 грн.</p>
        </div>
        <div id = "c-1309062" class="block">
            <p>Смартфон Huawei P20 Black за півроку суттєво здешевшав. У день розпродажу Ви могли б купити його на 3 тис. дешевше, ніж за тиждень до цього. А от купивши його за півроку до Чорної пʼятниці, переплатили б 7.2 тис. грн</p>

        </div>
        <div id = "c-1104145" class="block">
            <p> Понад 40% або 5 тис. грн знижки один з магазинів чесно пропонував на недешеву праску з парогенератором Braun IS7056BK PRO - PRO LOCK REMOVABLE. В Чорну пʼятницю Ви б заплатили за неї 7 тис. грн грн замість звичайних 12 тис. грн</p>
        </div>

        <div id="r-51927894" class="block">
            <p> Також можна було суттєво зекономити на роботі-пилососі для сухого та вологого прибирання MAMIBOT EXVAC660. В день розпродажу він коштував майже вдвічі дешевше. А середньому знижка на пилесоси в цей день сягала 17%.</p>
        </div>

        <div id="c-1167115" class="block" style="height: 35vh;">
            <p id="undoSticky"> Телевизор Samsung QE65Q8CAMUXUA втрачав в ціні потроху протягом півроку. Проте якщо порівнювати його ціну в день розпродажу із середньої, знижка виглядає вагомо.</p>
        </div>
    </div>
    </div>
</div>


<div class="content">
    <p>Ми показали Вам кілька конкретних прикладів. Але вам доступні всі 7,5 тис. товарів, по яких ми збирали дані. Тож якщо хочете більше прикладів, обирайте категорію товарів яка Вам цікава і тисніть на кнопку “Показати” - база підтягне Вам 10 випадкових товарів у вибраній категорії. Хочете подивитись інші 10 - натисніть “Ще графічків”.  </p>

</div>

<div id="selectButtons" style="width:max-content; margin: 50px auto">
    <div id="MyDropDownList" style="width:max-content; float:left; margin-right: 10px"></div>
    <div id="MyDropDownList2" style="width:max-content; float:left; margin-right: 10px"></div>
    <button id="mybut" style="width:max-content; margin-right: 10px">Показати</button>
</div>
<div id="charts">

</div>
<!--<script src="server.js"></script>-->
<script src="lib/jquery-2.1.4.min.js"></script>
<!--<script src="lib/d3.min.js"></script>-->
<script src ="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
<script src="lib/swoopy-drag.js"></script>
<script src="lib/d3v4jetpack.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartist/0.9.7/chartist.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>-->
<script src="js/script.js"></script>
<!--<script src="https://unpkg.com/tippy.js@3/dist/tippy.all.min.js"></script>-->
<script src="js/sale.js"></script>
<script src="js/example.js"></script>
<script src="js/scatterplot.js"></script>

<script>




//$("#sparkline-dashed").sparkline([7,9,7,7,6,7], {
//    type: 'line',
//    width: '80',
//    height: '10',
//    lineColor: '#ffffff',
//    fillColor: '#000000',
//    lineWidth: 1,
//    spotColor: '#',
//    minSpotColor: '#',
//    maxSpotColor: '#',
//    highlightSpotColor: '#',
//    highlightLineColor: '#',
//    spotRadius: 0,
//    normalRangeColor: '#'});
//
//
//$("#sparkline-pink").sparkline([0,3,2,2,2.2,2,2 ], {
//    type: 'line',
//    width: '80',
//    height: '10',
//    lineColor: '#ff36ad',
//    fillColor: '#000000',
//    lineWidth: 1,
//    spotColor: '#',
//    minSpotColor: '#',
//    maxSpotColor: '#',
//    highlightSpotColor: '#',
//    highlightLineColor: '#',
//    spotRadius: 0,
//    normalRangeColor: '#'});

function isOnScreen(elem) {
    // if the element doesn't exist, abort
    if (elem.length == 0) {
        return;
    }
    var $window = $(window);
    var viewport_top = $window.scrollTop();
    var viewport_height = $window.height();
    var viewport_bottom = viewport_top + viewport_height;
    var $elem = $(elem);
    var top = $elem.offset().top;
    var height = $elem.height();
    var bottom = top + height;

    return (top >= viewport_top && top < viewport_bottom) ||
            (bottom > viewport_top && bottom <= viewport_bottom/2) ||
            (height > viewport_height && top <= viewport_top && bottom >= viewport_bottom)
}


function getElemIsOnView(elemClass) {
    var blocks = $(elemClass);
    var prevId;
    var targetId;
    blocks.each(function() {
        if(isOnScreen(this)) {
            var prevElem = $(this).previousSibling;
            prevId = $(prevElem).attr("id");
            targetId = $(this).attr("id");
//            console.log(targetId);
//            console.log(prevId);
        }
    });
    if(targetId != prevId) {
        return targetId;
    }

}


</script>

<div class="tooltip"><div id='tipDiv'><p><span class='ct-chart-pink line'>Ціна продажу - </span><span class='ct-chart-black line'>Стара ціна - </span><button id="closeX">&times;</button></p></div></div>

</body>
</html>